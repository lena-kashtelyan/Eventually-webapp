{
  "name": "facebook-events-by-location",
  "description": "A Express.js-based microservice to get public Facebook events by location.",
  "keywords": [
    "Facebook,events,event,search,location,microservice,backend,app"
  ],
  "version": "0.4.2",
  "private": false,
  "scripts": {
    "start": "node ./app"
  },
  "dependencies": {
    "bluebird": "^2.10.0",
    "debug": "~2.2.0",
    "express": "~4.13.1",
    "morgan": "~1.6.1",
    "request-promise": "^0.4.3"
  },
  "bugs": {
    "url": "https://github.com/tobilg/facebook-events-by-location/issues"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/tobilg/facebook-events-by-location.git"
  },
  "license": "MIT",
  "readme": "# Search Facebook events by location (as a service)\nA Express.js-based webservice to get public Facebook events by location. It can be used as a starting point for an location-based app for example.\n\nAs Facebook has discontinued the FQL query API for all apps created after 2014-04-30, it has gotten much more complicated to get public Facebook events by passing a location.\n\nThis implementation uses regular Facebook Graph API calls in a three-step approach to get the events:\n\n1. Search for places in the radius of the passed coordinate and distance (`/search?type=place&q=*&center={coordinate}&distance={distance}`)\n2. Use the places to query for their events in parallel (`/?ids={id1},{id2},{id3},...`)\n3. Unify, filter and sort the results from the parallel calls and return them to the client\n\n###Known limitations\n\n* The Graph API has some \"instabilities\" with search results. It's possible that the amount of results returned can vary between calls within seconds\n* The `/search` endpoint \"magically\" limits the number of results, independent from the `distance` used (larger distance doesn't guarantee more results)\n* [Rate limiting](https://developers.facebook.com/docs/graph-api/advanced/rate-limiting) will apply, but I experienced no call blocks within a reasonable amount of service requests. Be aware that the way this application works, there are potentially hundreds of (counted) Graph API calls per request to `/events`.\n\n##Installation\n\n### As NPM package\nThe application can be installed via \n\n`npm install facebook-events-by-location`\n\nin the root directory, and either started with \n\n`npm start` or `node app.js`.\n\n#### Git\nTo clone the repository, use\n\n`git clone https://github.com/tobilg/facebook-events-by-location.git`\n\nand run `cd facebook-events-by-location && npm i && npm start` to install the dependencies and run the web service.\n\n### As Docker microservice\nYou can build the Docker image via `docker build -t <yourTag> .` locally if you like. Also, there's an [official image](https://hub.docker.com/r/tobilg/facebook-event-search/) (called `tobilg/facebook-event-search`) in the Docker hub.\n \nThe service can be launched via Docker like this:\n\n`docker run -d --name fb-event-search -p 3000:3000 tobilg/facebook-event-search`\n\nThis would expose the app on port 3000 on the Docker host. If you want to specify another port for the app, you can use `-e \"APP_PORT=10000\"` together with `--net=\"host\"` (be aware of the security implications of host networking). \n\n##API\nThe basic endpoint is `/events`, the port of the application can be set via environment variable.\n\n###Query paramenters\nMandatory parameters are the following:\n\n* `lat`: The latitude of the position/coordinate the events shall be returned for\n* `lng`: The longitude of the position/coordinate the events shall be returned for\n* `distance`: The distance in meters (it makes sense to use smaller distances, like max. 2500)\n* `access_token`: The **App Access Token** to be used for the requests to the Graph API\n\nNon-mandatory parameters\n\n* `sort`: The results can be sorted by `time`, `distance`, `venue` or `popularity`. If omitted, the events will be returned in the order they were received from the Graph API\n\n###Query results\nThe response will be `application/json` and contain an `events` property containing the array of event objects, as well as a `metadata` property with some stats. See below for an example.\n\n###Sample call\n\n`http://localhost:3000/events?lat=40.710803&lng=-73.964040&distance=1000&sort=venue&access_token=YOUR_APP_ACCESS_TOKEN` (make sure you replace `YOUR_APP_ACCESS_TOKEN` with a real access token!)\n\n###Sample output (shortened)\n\n```javascript\n{\n    \"events\": [\n        {\n            \"venueId\": \"460616340718401\",\n            \"venueName\": \"Baby's All Right\",\n            \"venueCoverPicture\": \"https://scontent.xx.fbcdn.net/hphotos-xfa1/t31.0-8/s720x720/12265652_847575375355827_6601509754180711535_o.jpg\",\n            \"venueProfilePicture\": \"https://scontent.xx.fbcdn.net/hprofile-xft1/v/t1.0-1/p200x200/1480734_642185745894792_5820988503650852577_n.png?oh=fc70de542d587b32e7a8a9183ddb0560&oe=56E4082D\",\n            \"venueLocation\": {\n                \"city\": \"Brooklyn\",\n                \"country\": \"United States\",\n                \"latitude\": 40.70998,\n                \"longitude\": -73.9634705,\n                \"state\": \"NY\",\n                \"street\": \"146 Broadway\",\n                \"zip\": \"11211\"\n            },\n            \"eventId\": \"1671296009750385\",\n            \"eventName\": \"Baby's All Basel | Dec 2 - 6 | Baby's All Right Miami Pop Up\",\n            \"eventCoverPicture\": \"https://scontent.xx.fbcdn.net/hphotos-xpa1/v/t1.0-9/s720x720/12249784_1002625069800744_6143497234204516409_n.png?oh=6e5b3eaa2a369d819d160560173cdbea&oe=56E61E88\",\n            \"eventProfilePicture\": \"https://scontent.xx.fbcdn.net/hphotos-xpa1/v/t1.0-0/c120.0.200.200/p200x200/12249784_1002625069800744_6143497234204516409_n.png?oh=9bc7c7dcd65934ab74010a890d9ac070&oe=56F5E8D3\",\n            \"eventDescription\": \"POPLIFE Presents:\\n\\nBABY'S ALL BASEL\\n\\nBrooklyn's Baby's All Right is touching down in Miami for a week full of live music & parties!\\n\\nGet involved in all the fun:\\nhttp://epop.life/BabysMiami\\n\\n21+ \\n\\n#BabysMiami\",\n            \"eventStarttime\": \"2015-12-02T17:00:00-0800\",\n            \"eventDistance\": \"103\",\n            \"eventTimeFromNow\": 884065,\n            \"eventStats\": {\n                \"attendingCount\": 143,\n                \"declinedCount\": 0,\n                \"maybeCount\": 96,\n                \"noreplyCount\": 1117\n            }\n        },\n        ...\n    ],\n    \"metadata\": {\n        \"venues\": 350,\n        \"venuesWithEvents\": 7,\n        \"events\": 23\n    }\n}\n```",
  "readmeFilename": "README.md",
  "homepage": "https://github.com/tobilg/facebook-events-by-location",
  "_id": "facebook-events-by-location@0.4.2",
  "_from": "facebook-events-by-location@"
}
